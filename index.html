<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="TroLab - A Decentralized Experimental Lab">
    <meta name="keywords" content="TroLab, decentralized, experimental lab, PWA, open source">
    
    <!-- Social + Base64 OG Images -->
    <meta property="og:title" content="TroLab - Decentralized Experimental Lab">
    <meta property="og:description" content="Run experiments, share results, and collaborate with TroLab.">
    <meta property="og:image" content="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA... (Base64)">
    <meta name="twitter:image" content="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA... (Base64)">
    <meta property="og:url" content="https://webswiftseo.github.io/TroLab/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="TroLab - Decentralized Experimental Lab">
    <meta name="twitter:description" content="Run experiments, share results, and collaborate with TroLab.">

    <!-- Structured data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "TroLab",
        "description": "A decentralized experimental lab demo for running experiments, sharing results, and collaborating.",
        "url": "https://webswiftseo.github.io/TroLab/"
    }
    </script>

    <link rel="manifest" href="/TroLab/manifest.json">
    <title>TroLab - Decentralized Experimental Lab</title>
    <link rel="stylesheet" href="/TroLab/style.css">
</head>

<body>
    <header>
        <button onclick="location.href='/TroLab/'" class="header-btn" aria-label="Home">Home</button>
        <button id="installBtn" class="header-btn install-btn" aria-label="Install PWA">Install</button>
    </header>

    <main>
        <section class="hero">
            <h1>Welcome to TroLab</h1>
            <p>A Decentralized Experimental Lab</p>
            <div class="cta-buttons">
                <a href="/TroLab/demo.html" class="btn">Demo</a>
                <a href="/TroLab/info.html" class="btn">Info</a>
                <a href="https://github.com/webswiftseo/TroLab" class="btn" target="_blank">GitHub</a>
            </div>
        </section>

        <section class="about">
            <!-- Existing about content (unchanged) -->
            <h2>About TroLab</h2>
            <p>TroLab is an open-source, decentralized platform for running experiments, sharing results, and collaborating. It‚Äôs fast, lightweight, and designed to work on all devices with no paywalls or clutter.</p>
            
            <h3>How It Works</h3>
            <p>TroLab allows users to simulate and run experimental lab scenarios using light, sound, and water variables. This simple demo enables rapid prototyping for more complex Troanary-based computation in the future.</p>

            <h3>TroLab Blockchain Demo</h3>
            <p>The next iteration (V2) integrates a public blockchain. Every experiment result can be:
                <ul>
                    <li>Logged to an immutable ledger for verification</li>
                    <li>Audited by community members (Layer 2 audit chain)</li>
                    <li>Tokenized for reward distribution (Troanary Coin)</li>
                </ul>
            </p>

            <h3>Earning & Reward System</h3>
            <p>TroLab rewards participation. Each experiment logged, reviewed, or validated on-chain earns users Troanary Coins (Tc).</p>

            <h3>The Troanary Mirror Principle</h3>
            <p>TroLab is built on the Troanary Mirror Thesis...</p>

            <h3>Why TroLab?</h3>
            <p>TroLab is a free-to-clone, open-source tool. You can deploy your own version, customize it, and build on it.</p>

            <h3>Get Involved</h3>
            <p>Clone the repo on GitHub. Experiment. Improve. Share. TroLab is community-built and community-owned.</p>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Search TroLab..." aria-label="Search TroLab">
                <button onclick="searchContent()" class="footer-btn" aria-label="Search">üîç</button>
            </div>
            <button onclick="sharePage()" class="footer-btn" aria-label="Share TroLab">üì§ Share</button>
            <a href="https://github.com/webswiftseo/TroLab" target="_blank" class="footer-btn" aria-label="Clone on GitHub">Clone on GitHub & Start Building</a>
            <p>¬© 2025 TroLab | GNU License</p>
        </div>
    </footer>

    <!-- JS Scripts -->
    <script src="/TroLab/scripts/share.js"></script>
    <script src="/TroLab/scripts/search.js"></script>
    <script>
        let deferredPrompt;

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('installBtn').style.display = 'inline-block';
        });

        window.addEventListener('appinstalled', () => {
            console.log('PWA installed');
            document.getElementById('installBtn').style.display = 'none';
        });

        function installPWA() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('User accepted the install prompt');
                    } else {
                        console.log('User dismissed the install prompt');
                    }
                    document.getElementById('installBtn').style.display = 'none';
                });
            }
        }

        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/TroLab/service-worker.js')
                .then((reg) => {
                    console.log('‚úÖ Service Worker registered', reg);
                })
                .catch((err) => {
                    console.error('‚ùå Service Worker registration failed', err);
                });
        }

        // Optional iOS install guide popup
        window.addEventListener('load', () => {
            const isIOS = /iphone|ipad|ipod/.test(window.navigator.userAgent.toLowerCase());
            const isInStandaloneMode = ('standalone' in window.navigator) && window.navigator.standalone;

            if (isIOS && !isInStandaloneMode) {
                setTimeout(() => {
                    alert('Install TroLab on your home screen:\n1. Tap Share\n2. Select "Add to Home Screen".');
                }, 1500);
            }
        });
    </script>
</body>
</html>
